const fs = require('fs');
const path = require('path');

const fixes = [
  {
    file: 'beginner-no-talent-myth-failure-path.md',
    addImage: {
      after: 'ã“ã®ä½œæ¥­ã«æ¯é€±30åˆ†ã€œ40åˆ†ã‹ã‹ã‚Šã€æœˆæ›œã®æœã®è²´é‡ãªæ™‚é–“ãŒå¥ªã‚ã‚Œã¦ã„ã¾ã—ãŸã€‚ã•ã‚‰ã«ã€ç¥æ—¥ã§æœˆæ›œãŒä¼‘ã¿ã®å ´åˆã¯ç«æ›œã«é€ã‚Šå¿˜ã‚ŒãŸã‚Šã€å‡ºå¼µä¸­ã«é€ã‚Œãªã‹ã£ãŸã‚Šã¨ã€ç¶™ç¶šæ€§ã®é¢ã§ã‚‚èª²é¡ŒãŒã‚ã‚Šã¾ã—ãŸã€‚',
      insert: '\n\n![æ¥­å‹™åŠ¹ç‡åŒ–ã®ã‚¤ãƒ¡ãƒ¼ã‚¸](https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=800&auto=format&fit=crop&q=60)'
    }
  },
  {
    file: 'beginner-error-ten-times-normal.md',
    addImage: {
      after: 'ã•ã‚‰ã«ã€ã€Œã‚¨ãƒ©ãƒ¼ã¯æ‚ªã„ã‚‚ã®ã€ã¨ã„ã†å›ºå®šè¦³å¿µãŒã‚ã‚Šã¾ã™ã€‚å­¦æ ¡æ•™è‚²ã§ã¯ã€Œé–“é•ãˆãªã„ã“ã¨ã€ãŒè©•ä¾¡ã•ã‚Œã‚‹å‚¾å‘ãŒã‚ã‚Šã€ãã®å½±éŸ¿ã§ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã“ã¨è‡ªä½“ã‚’å¤±æ•—ã¨æ‰ãˆã¦ã—ã¾ã„ã¾ã™ã€‚ã—ã‹ã—ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã«ãŠã„ã¦ã‚¨ãƒ©ãƒ¼ã¯ã€Œå¤±æ•—ã€ã§ã¯ãªãã€Œãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã€ãªã®ã§ã™ã€‚',
      insert: '\n\n![ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«å‘ãåˆã†é–‹ç™ºè€…](https://images.unsplash.com/photo-1551434678-e076c223a692?w=800&auto=format&fit=crop&q=60)'
    }
  },
  {
    file: 'beginner-success-small-wins.md',
    addImage: {
      after: 'å¿ƒç†å­¦ã®ç ”ç©¶ã§ã‚‚ã€å°ã•ãªæˆåŠŸä½“é¨“ã®ç©ã¿é‡ã­ãŒè‡ªå·±åŠ¹åŠ›æ„Ÿã‚’é«˜ã‚ã€æœ€çµ‚çš„ã«å¤§ããªç›®æ¨™é”æˆã«ã¤ãªãŒã‚‹ã“ã¨ãŒè¨¼æ˜ã•ã‚Œã¦ã„ã¾ã™ã€‚ã‚²ãƒ¼ãƒ ã®ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ã‚·ã‚¹ãƒ†ãƒ ãŒäººã‚’å¤¢ä¸­ã«ã•ã›ã‚‹ã®ã‚‚ã€ã“ã®ã€Œå°ã•ãªé”æˆæ„Ÿã€ã®é€£ç¶šãŒæ¥½ã—ã•ã‚’ç”Ÿã¿å‡ºã™ã‹ã‚‰ã§ã™ã€‚ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°å­¦ç¿’ã§ã‚‚ã€åŒã˜åŸç†ã‚’æ´»ç”¨ã§ãã¾ã™ã€‚',
      insert: '\n\n![æˆåŠŸã‚’å–œã¶æ§˜å­](https://images.unsplash.com/photo-1552664730-d307ca884978?w=800&auto=format&fit=crop&q=60)'
    }
  },
  {
    file: 'beginner-no-comparison-own-pace.md',
    addImage: {
      after: 'ã•ã‚‰ã«ã€ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã®å­¦ç¿’ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã§ã¯ã€æˆåŠŸäº‹ä¾‹ã°ã‹ã‚ŠãŒç›®ç«‹ã¡ã¾ã™ã€‚ã€Œ3ãƒ¶æœˆã§ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢è»¢è·æˆåŠŸï¼ã€ã€Œå‰¯æ¥­ã§æœˆ10ä¸‡å††é”æˆï¼ã€ã¨ã„ã£ãŸè¯ã€…ã—ã„å ±å‘Šã‚’è¦‹ã‚‹ã¨ã€è‡ªåˆ†ã®é…ã„é€²æ—ãŒæ¥ãšã‹ã—ãæ„Ÿã˜ã‚‰ã‚Œã€è³ªå•ã™ã‚‹ã“ã¨ã™ã‚‰èºŠèº‡ã—ã¦ã—ã¾ã„ã¾ã™ã€‚æœ¬æ¥ã¯å­¦ã³ã®å ´ã§ã‚ã‚‹ã¯ãšã®ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãŒã€ã‹ãˆã£ã¦ãƒ—ãƒ¬ãƒƒã‚·ãƒ£ãƒ¼ã®æºã«ãªã£ã¦ã„ã‚‹ã®ã§ã™ã€‚',
      insert: '\n\n![ãƒã‚¤ãƒšãƒ¼ã‚¹ã§å­¦ç¿’ã™ã‚‹æ§˜å­](https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=800&auto=format&fit=crop&q=60)'
    }
  }
];

const postsDir = path.join(__dirname, '..', 'content', 'posts');

fixes.forEach(fix => {
  const filePath = path.join(postsDir, fix.file);
  let content = fs.readFileSync(filePath, 'utf-8');

  // 3æšç›®ã®ç”»åƒã‚’è¿½åŠ 
  if (fix.addImage && content.includes(fix.addImage.after)) {
    // æ—¢ã«ç”»åƒãŒå­˜åœ¨ã—ãªã„ã‹ç¢ºèª
    if (!content.includes(fix.addImage.insert.trim())) {
      content = content.replace(fix.addImage.after, fix.addImage.after + fix.addImage.insert);
      console.log(`âœ… ${fix.file}: 3æšç›®ã®ç”»åƒè¿½åŠ æˆåŠŸ`);
    } else {
      console.log(`â„¹ï¸ ${fix.file}: 3æšç›®ã®ç”»åƒã¯æ—¢ã«å­˜åœ¨ã—ã¾ã™`);
    }
  }

  fs.writeFileSync(filePath, content, 'utf-8');
});

console.log('\nğŸ‰ å…¨è¨˜äº‹ã«3æšç›®ã®ç”»åƒã‚’è¿½åŠ ã—ã¾ã—ãŸï¼');
